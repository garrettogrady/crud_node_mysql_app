<% include partials/header.ejs %>
    <h1 class="index-title"> Your Hosted Events </h1>
    <div class="table-wrapper">
        <div class="container">
            <div class="row">
                <% if (event[0].length > 0) {%>
                    <div class="table-div m-2 col">
                        <caption>Upcoming Events</caption>
                        <table class="table table-hovered" >

                            <thead class="thead-dark">
                                <tr>
                                    <th scope="col">Name</th>
                                    <th scope="col">Image</th>
                                    <th scope="col">Address</th>
                                    <th scope="col">Time</th>
                                    <th scope="col">Date</th>
                                    <th scope="col">Level</th>
                                    <th scope="col">Host</th>

                                </tr>
                            </thead>
                            <tbody>
                                <% event[0].forEach((event, index) => { %>
                                    <tr>
                                        <th scope="row"><%= event.event_name %></th>
                                        <td><img src="/assets/img/<%= event.image %>" class="rounded-circle player-img" alt=""></td>
                                        <td><%= event.event_address %></td>
                                        <td><%= event.event_time %></td>
                                        <td><%= event.event_date %></td>
                                        <td><%= event.event_level %></td>
                                        <td><a href="/show_user/<%= event.host_id %>"><%= event.email %></a></td>
                                    </tr>
                                <% }) %>
                            </tbody>
                        </table>
                    </div>
                <% } else { %>
                    <div class="col m-2">
                        <p class="text-center">No upcoming events found.</p>
                    </div>
                <% } %>
                <% if (event[1].length > 0) {%>
                    <div class="table-div m-2 col">
                        <caption>Past Events</caption>
                        <table class="table table-hovered">
                            <thead class="thead-dark">
                                <tr>
                                    <th scope="col">Name</th>
                                    <th scope="col">Image</th>
                                    <th scope="col">Address</th>
                                    <th scope="col">Time</th>
                                    <th scope="col">Date</th>
                                    <th scope="col">Level</th>
                                    <th scope="col">Host</th>
                                    <th scope="col">Action</th>

                                </tr>
                            </thead>
                            <tbody>
                                <% event[1].forEach((event, index) => { %>
                                    <tr>
                                        <th scope="row"><%= event.event_name %></th>
                                        <td><img src="/assets/img/<%= event.image %>" class="rounded-circle player-img" alt=""></td>
                                        <td><%= event.event_address %></td>
                                        <td><%= event.event_time %></td>
                                        <td><%= event.event_date %></td>
                                        <td><%= event.event_level %></td>
                                        <td><a href="/show_user/<%= event.host_id %>"><%= event.email %></a></td>
                                        <td>
                                            <a href="/" rel="noopener" class="btn btn-sm btn-primary">Review</a>
                                        </td>
                                    </tr>
                                <% }) %>
                            </tbody>
                        </table>
                    </div>
                <% } else { %>
                    <div class="w-2 col">
                        <p class="text-center">No past events found.</p>
                    </div>
                <% } %>
            </div>
            <div class="row">
                <% if (event[2].length > 0) {%>
                    <div class="table-div col m-2"> 
                        <caption>Your Events</caption>
                        <table class="table table-hovered" >

                            <thead class="thead-dark">
                                <tr>
                                    <th scope="col">Name</th>
                                    <th scope="col">Image</th>
                                    <th scope="col">Address</th>
                                    <th scope="col">Time</th>
                                    <th scope="col">Date</th>
                                    <th scope="col">Level</th>
                                    <th scope="col">Host</th>
                                    <th scope="col">Action</th>

                                </tr>
                            </thead>
                            <tbody>
                                <% event[2].forEach((event, index) => { %>
                                    <tr>
                                        <th scope="row"><%= event.event_name %></th>
                                        <td><img src="/assets/img/<%= event.image %>" class="rounded-circle player-img" alt=""></td>
                                        <td><%= event.event_address %></td>
                                        <td><%= event.event_time %></td>
                                        <td><%= event.event_date %></td>
                                        <td><%= event.event_level %></td>
                                        <td><a href="/show_user/<%= event.host_id %>"><%= event.email %></a></td>
                                        <td>
                                            <% if (event.id == currentUser) {%>
                                                <a href="/edit_event/<%= event.event_id %>" rel="noopener" class="btn btn-sm btn-success">Edit</a>
                                                <a href="/delete_event/<%= event.event_id %>" class="btn btn-sm btn-danger">Delete</a>
                                            <% } %>
                                        </td>
                                    </tr>
                                <% }) %>
                            </tbody>
                        </table>
                    </div>
                <% } else { %>
                    <div class="col w-2">
                        <p class="text-center">You have not hosted any events.</p>
                    </div>
                <% } %>
            </div>
        </div>
    </div>
</div>
</body>
</html>
